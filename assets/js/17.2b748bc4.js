(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{395:function(t,s,e){"use strict";e.r(s);var n=e(50),a=Object(n.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"xrdp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xrdp"}},[t._v("#")]),t._v(" XRDP")]),t._v(" "),e("p",[t._v("簡単に言うとリモートデスクトップ。"),e("br"),t._v("\nLinux 系には VNC っていうリモート操作用の仕組みが備わっているが、それとは違ってリモートで直接ログインする感じ。"),e("br"),t._v("\nVNC はログイン中のユーザーを操作する仕組み。"),e("br"),t._v("\n逆に GUI でログイン中のユーザーに対しては接続できない。")]),t._v(" "),e("p",[t._v("VNC  が google のリモートデスクトップ"),e("br"),t._v("\nXRDP が windows のリモートデスクトップ、という認識が近い。")]),t._v(" "),e("p",[t._v("それもあってかとても軽量で、セキュリティ性も高いのでおすすめ。")]),t._v(" "),e("h2",{attrs:{id:"xrdp-接続の設定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xrdp-接続の設定"}},[t._v("#")]),t._v(" XRDP 接続の設定")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# インスコ")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" xrdp\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# （一応）設定のコピー")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /etc/xrdp\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" startwm.sh startwm.sh.copy\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 編集")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" startwm.sh\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 設定を適用するための再起動")]),t._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl restart xrdp\n")])])]),e("p",[e("code",[t._v("sshd_config")]),t._v(" の編集箇所は下の通り。"),e("br"),t._v("\n起動時に budgie desktop を起動するようにする。")]),t._v(" "),e("div",{staticClass:"language-diff extra-class"},[e("pre",{pre:!0,attrs:{class:"language-diff"}},[e("code",[t._v("$ diff -U 0 startwm.sh.copy startwm.sh\n"),e("span",{pre:!0,attrs:{class:"token coord"}},[t._v("--- startwm.sh.copy     2021-10-21 00:34:14.996716937 +0900")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token coord"}},[t._v("+++ startwm.sh  2021-10-21 00:34:35.852593748 +0900")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token coord"}},[t._v("@@ -33 +33 @@")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[e("span",{pre:!0,attrs:{class:"token prefix deleted"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token line"}},[t._v("test -x /etc/X11/Xsession && exec /etc/X11/Xsession\n")])]),e("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[e("span",{pre:!0,attrs:{class:"token prefix inserted"}},[t._v("+")]),e("span",{pre:!0,attrs:{class:"token line"}},[t._v("test -x /etc/X11/Xsession && exec /etc/X11/Xsession /usr/bin/budgie-desktop\n")])])])])]),e("p",[t._v("参考: "),e("a",{attrs:{href:"http://www.novofirmus.com/2020/07/27/remote-desktop-and-ubuntu-budgie-19-04/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Remote Desktop and Ubuntu Budgie 19.04"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"rdp-接続を行う"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rdp-接続を行う"}},[t._v("#")]),t._v(" RDP 接続を行う")]),t._v(" "),e("p",[t._v("Windows の場合、 "),e("code",[t._v("リモート デスクトップ接続")]),t._v(" アプリを実行する。")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/assets/win-remote-02.png"),height:"240px"}}),t._v(" "),e("img",{attrs:{src:t.$withBase("/assets/win-remote-03.png"),height:"240px"}}),t._v(" "),e("p",[e("code",[t._v("login failed for display 0")]),t._v(" ってでてきたらパスワードが違う系。"),e("br"),t._v("\n他のエラーならそもそも接続できないと思われ。")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("日本語の windows から接続するとほぼ 100% で JIS キーボードと認識されます。"),e("br"),t._v("\nキーボードレイアウトを USKEY にしていても無駄です。；；")]),t._v(" "),e("p",[t._v("色々対処法があるようですが、接続時に IME を英語にするやり方がシンプルで楽でした。"),e("br"),t._v("\nRDP は接続時に環境の言語情報を送るので、英語にしておくと入力を US キーボードとして認識してくれます。"),e("br"),t._v(" "),e("strong",[t._v("接続時だけでOK")]),t._v(" です。")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/assets/xrdp-01.png"),height:"240px"}}),t._v(" "),e("img",{attrs:{src:t.$withBase("/assets/xrdp-02.png"),height:"240px"}}),t._v(" "),e("p",[t._v("Windows 10 デフォルトの切り替えショートカットは "),e("code",[t._v("Alt + Ctrl")]),t._v(" です。")]),t._v(" "),e("p",[t._v("（これで2日は持ってかれた！！！！！）")]),t._v(" "),e("p",[t._v("参考: "),e("a",{attrs:{href:"https://tamapoco.com/archives/6260",target:"_blank",rel:"noopener noreferrer"}},[t._v("xrdpでクライアントのキーボード種別を認識させる方法"),e("OutboundLink")],1),e("br"),t._v("\n参考: "),e("a",{attrs:{href:"https://ez-net.jp/article/36/iuQFADZB/cpjF6tqaBv7b/",target:"_blank",rel:"noopener noreferrer"}},[t._v("XRDP で macOS から Ubuntu に接続したときにキーボードを US 配列で認識させる"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("参考: "),e("a",{attrs:{href:"https://www.tipsfound.com/windows10/12008",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows 10 Alt + Shift で IME の入力言語の切り替えを無効にする"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=a.exports}}]);